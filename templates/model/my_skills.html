{% extends "core/base.html" %}
{% load staticfiles %}

{% block title %}Moje vědomosti{% endblock %}

{% block content %}
{#    <h1>Moje vědomosti</h1>#}
    {% if user_showed.as_child %}
        <h1>{{ user_showed.first_name }} {{ user_showed.last_name }}</h1>
    {% endif %}

    <dl class="tabs skill-tabs" data-tab>
        {% for skill in skills %}
             <dd {% if active == skill.name %}class="active"{% endif %}>
                 <a style="{{ skill.style }} background-image: url('{% static skill.image_name %}')"
                     href="#panel{{ skill.pk }}"
                     >
                     {{ skill.note }}</a></dd>
        {% endfor %}
    </dl>
    <hr/>
    <div class="right text-right">
        {% if proceed_skill %}
            Pokračovat v procvičování <br/>
            {% if proceed_skill.level < 3 %}
                <a href="{% url "play" proceed_skill.name %}"><button class="radius">{{ proceed_skill.note }}</button></a>
            {% else %}
                <a href="{% url "play" proceed_skill.parent.name proceed_skill.pk %}"><button class="radius">{{ proceed_skill.note }}</button></a>
            {% endif %}
        {% endif %}
    </div>

    <div class="tabs-content">
        {% for skill_data in data %}
            <div class="content{% if active == skill_data.skill.name %} active{% endif %}"
                 id="panel{{ skill_data.skill.pk }}">
                {% if skill_data.skill.used %}

                    <h3>{{ skill_data.skill.note }} - <a style="font-size: 0.7eM" href="{% url "play" skill_data.skill.name %}">procvičit</a></h3>
                    <div class="progress small-12 medium-10 large-8 small-centered round">
                        <span class="meter" style="{{ skill_data.skill.style }} width: {{ skill_data.skill.value_percent }}%">
                            {{ skill_data.skill.value_percent }}%
                        </span>
                    </div>
                    {% for _, user_skill in skill_data.skills.items %}
                        {% if user_skill.used and user_skill.active %}
                            <b>{{ user_skill.note }}</b> -
                                <a href="{% url "play" skill_data.skill.name user_skill.pk%}">procvičit</a>
                             <div class="progress small-12 medium-10 large-8 small-centered round">
                                 <span class="meter" style="{{ user_skill.style }} width: {{ user_skill.value_percent }}%">
                                     {{ user_skill.value_percent }}%
                                 </span>
                             </div>
                        {% endif %}
                    {% endfor %}
                    <hr/>
                    <table class="user_skills" style="display: block;">
                        {% for row in skill_data.table %}
                            <tr>
                            {% for skill in row %}<!-- to avoid whitespaces in inline-block
                        --><td style="{{skill.style}}">
                                    {{ skill.name }}
                                </td><!--
                        -->{% endfor %}
                            </tr>
                        {% endfor %}
                    </table>
                {% else %}
                    <div class="text-center">
                        Zatím žádné procvičené úlohy z této dovednosti
                        <br/><br/>
                        <a href="{% url "play" skill_data.skill.name%}"><button class="radius">Procvičit</button></a>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>


{% endblock %}
