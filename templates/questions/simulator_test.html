{% extends "core/base.html" %}
{% load staticfiles %}


{% block content %}
    <form action="{% url "questions.views.simulator_test" %}" bg ng-controller="Hider">
        Schovat: <input type="checkbox" ng-model="hide">
        <div ng-hide="hide">
            {{ form.as_p }}
            <input type="submit" value="Vybrat"/>
            <p>Selected question: {% if own_question %}{{ own_question }}{% else %}{{ question }}{% endif %}</p>
        </div>
    </form>

    {% if question or own_question%}
        <hr/>
        <div class="row collapse" ng-init="
                    test=true;
                    {% if question %}question_pk={{ question.pk }}{% endif %};
                    {% if own_question %}own_question='{{ own_question }}'{% endif %};
                    simulator='{{ simulator }}';
                    ">
            <div ng-controller="Loader">
                {% if graphics == "wi" %}
                    <div style="position: relative">
                    {% verbatim %}
                    <div ng-show="loading" ng-cloak class="loading-spinner">
                        {% endverbatim %}{% include "core/spinner.html" %}{% verbatim %}
                    </div>
                    <rollerwizard closed="loading || question.hide" control="roller" question="question_description.top">
                        <div id="playground"></div>
                    </rollerwizard>
                    <keyboardwizard closed="loading || question.hide"></keyboardwizard>
                    <wizard say="say" ng-class="solved"></wizard>
                    <counterwizard current="counter.progress"></counterwizard>
                    {% endverbatim %}
                    </div>
                {% else %}
                    {% verbatim %}
                    <div ng-show="!question.hide" class="animate-show medium-10 columns">
                        <div class="text-center show-for-small-only">{{ counter.current }} z {{ counter.total }}</div>
                        <div class="result">
                            &nbsp;
                            <span class="green" ng-cloak ng-show="solved=='solved_correctly'">Správně<span ng-show="fast_solution"> a rychle</span></span>
                            <span class="red" ng-cloak ng-show="solved=='solved_incorrectly'">Špatně</span>
                            <p ng-cloak ng-hide="solved">{{ question_description.top }}</p>
                        </div>

                        <div ng-class="solved" id="playground"></div>

                        <keyboard />
                    </div>

                    <div class="medium-2 columns">
                        <div class="row collapse show-for-medium-up">
                            <div class="small-centered small-5 medium-12 medium-uncentered large-5 columns">
                                <input class="text-center" style="margin: 0;" type="text" value="{{ counter.current }} z {{ counter.total }}" disabled  />
                            </div>
                            <div class="small-centered small-5 medium-12 medium-uncentered large-7 columns">
                                <input class="button postfix" type="button" ng-click="skip()" value="Nevím" />
                            </div>
                        </div>
                    </div>
                    {% endverbatim %}
                {% endif %}
            </div>
        </div>
    {% endif %}

{% endblock %}


{% block extrascripts %}
    <script src="{% static "simulators/loader.js" %}"></script>
    <script src="{% static "simulators/directives.js" %}"></script>
    {% if graphics == "wi" %}
        <script src="{% static "simulators/keyboard-wizard.js" %}"></script>
        <script src="{% static "simulators/roller-wizard.js" %}"></script>
        <script src="{% static "simulators/counter-wizard.js" %}"></script>
        <script src="{% static "graphics/wizard/wizard.js" %}"></script>
    {% else %}
    {% endif %}
    {% for simulator in simulators %}
        <script src="{% static "simulators/" %}{{ simulator }}/controller.js"></script>
    {% endfor %}
    <script>
        app.controller('Hider', ['$scope', function($scope) {
            $scope.hide=false;
        }]);
        var device = "{{ device }}";
    </script>
    {% include "questions/template_urls.html" %}
{% endblock %}